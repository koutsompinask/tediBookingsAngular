<div class="container-fluid">
  <div class="row">
      <div class="col-md-3"></div>
      <div class="container col-md-6 p-4">
          <h1 class="text-secondary text-center">Update Profile Details</h1>
          <form [formGroup]="editUserForm" (ngSubmit)="onSubmit()">
              <div class="form-group">
                  <label class="text-secondary" for="username">Username</label>
                  <input type="text" class="form-control" id="username" 
                  formControlName="username" >
              </div>
              <div class="text-danger" *ngIf="!editUserForm.get('username')?.valid && (editUserForm.get('username')?.touched || showErrors)">
                  <small>Username can contain 3-20 alphanumeric chars (only letters A-Z, numbers and '_')</small>
              </div>
              <div class="text-danger" *ngIf="userNameExists">
                <small>Username {{usernameChecked}} already exists, please try something else.</small>
              </div>
              <div class="form-group">
                  <label class="text-secondary" for="photo">Add Profile Picture (overrides previous)</label>
                  <input type="file" value="select" #selectFile (change)="onFileSelected($event)" class="form-control" id="photo" >
              </div>
              <div class=row>
                  <div class="form-group col-md">
                      <label class="text-secondary" for="firstName">First Name</label>
                      <input type="text" class="form-control" id="firstName" 
                       formControlName="firstName" >
                  </div>
                  <div class="form-group col-md">
                      <label class="text-secondary" for="lastName">Last Name</label>
                      <input type="text" class="form-control" id="lastName" 
                      formControlName="lastName" >
                  </div>
              </div>
              <div class="text-danger" 
              *ngIf="(!editUserForm.get('firstName')?.valid && (editUserForm.get('firstName')?.touched || showErrors))
                      || (!editUserForm.get('lastName')?.valid && (editUserForm.get('lastName')?.touched || showErrors))">
                  <small>First name and last name must contain only letters (without spaces)</small>
              </div>
              <div class="form-group">
                  <label class="text-secondary" for="userEmail">Email</label>
                  <input type="email" class="form-control" id="userEmail" 
                  formControlName="email">
              </div>
              <div class="text-danger" *ngIf="!editUserForm.get('email')?.valid && (editUserForm.get('email')?.touched || showErrors)">
                  <small>Please enter a valid Email</small>
              </div>
              <div class="form-group">
                <label class="text-secondary" for="phone">Tel. Number</label>
                <input type="text" class="form-control" id="phone" 
                formControlName="phone">
            </div>
            <div class="text-danger" *ngIf="!editUserForm.get('phone')?.valid && (editUserForm.get('phone')?.touched || showErrors)">
                <small>Please enter a valid phone number (only numbers - no spaces)</small>
            </div>
            <div class="text-center m-2">
                <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#changePassModal">Change Password </button>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-lg btn-kkout mt-3">Update Details</button>
            </div>
          </form>
      </div>
      <div class="col-md-3"></div>
  </div>
</div>

<div class="modal fade" id="changePassModal" tabindex="-1" aria-labelledby="changePassModallLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header text-secondary">
                <h5> Change Password</h5>
            </div>
            <div class="m-3">
                <form [formGroup]="passwordChangeForm">
                    <div class="form-group">
                        <label class="text-secondary" for="password">New Password</label>
                        <input type="password" class="form-control" id="password" 
                        formControlName="password" >
                    </div>
                    <div class="text-danger" *ngIf="!passwordChangeForm.get('password')?.valid && (passwordChangeForm.get('password')?.touched || showErrors)">
                        <small>Please enter a valid password ( no spaces and more than 4 characters )</small>
                    </div>
                    <div class="form-group">
                        <label class="text-secondary" for="passwordRepeat">Re-enter passsword</label>
                        <input type="password" class="form-control" id="passwordRepeat"
                        formControlName="passwordRep">
                    </div>
                    <div class="text-danger" *ngIf="!passwordChangeForm.valid && (passwordChangeForm.get('passwordRep')?.touched || showErrors)">
                        <small>Passwords don't match</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-kkout" data-bs-dismiss="modal" (click)="changePassword()">Change Password</button>
            </div>
        </div>
    </div>
</div>